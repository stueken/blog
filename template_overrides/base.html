{% extends '!theme/base.html' %}

{% block custom_css %}
{# For this to work, add block custom_css just before the main css file
inside the extended base.html template #}

{% if (article and article.photo_gallery) or (articles_page and articles_page.object_list[0].photo_gallery) %}

{# Magnific Popup core CSS file #}
<link rel="stylesheet" href="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/css/magnific-popup.css">

{% endif %}

{% endblock custom_css %}


{% block custom_js %}
{# For this to work, add block custom_js just before the closing body tag 
inside the extended base.html template #}

{% if (article and article.photo_gallery) or (articles_page and articles_page.object_list[0].photo_gallery) %}

{# jQuery 1.7.2+ or Zepto.js 1.0+ #}
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

{# Magnific Popup core JS file #}
<script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/jquery.magnific-popup.min.js"></script>

<script>
$('.gallery').magnificPopup({
    // main options
	delegate: 'a', // the selector for gallery item
	type: 'image',
	gallery: {
		// options for gallery
		enabled: true,
		navigateByImgClick: true,
		preload: [1,2],
	},
	image: {
		// options for image content type
		titleSrc: function(item) {
			if (item.el.attr('caption') && item.el.attr('exif')) {
				return (item.el.attr('caption').replace(/\\n/g, '<br />') +
					'<small>' + item.el.attr('title') + ' - ' + item.el.attr('exif') + '</small>');
			}
		return item.el.attr('title') + '<small>' + item.el.attr('exif') + '</small>';
		}
	},
	removalDelay: 300, // Delay in milliseconds before popup is removed
	mainClass: 'mfp-fade' // Class that is added to popup wrapper and background
});
</script>
{% endif %}

{% endblock custom_js %}
